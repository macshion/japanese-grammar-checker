chrome.sidePanel.setPanelBehavior({openPanelOnActionClick:!0}).catch(e=>console.error(e));chrome.contextMenus.create({id:"checkJapaneseGrammar",title:"Check Japanese Grammar",contexts:["selection"]});chrome.contextMenus.onClicked.addListener((e,n)=>{e.menuItemId==="checkJapaneseGrammar"&&e.selectionText&&chrome.storage.local.set({selectedText:e.selectionText},()=>{chrome.sidePanel.getOptions({windowId:n.windowId}).then(t=>{t.enabled&&t.open?chrome.tabs.sendMessage(n.id,{action:"updateSelectedText",text:e.selectionText}):chrome.sidePanel.open({windowId:n.windowId})}).catch(t=>{console.error("Error checking side panel state:",t),chrome.sidePanel.open({windowId:n.windowId})})})});chrome.runtime.onMessage.addListener((e,n,t)=>!0);
